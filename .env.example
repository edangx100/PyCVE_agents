# ==============================================================================
# The user must update at least the following two:
# OPENROUTER_API_KEY=sk-or-v1-your-key-here
# DOCKER_LLM_API_KEY=sk-or-v1-your-key-here
# ==============================================================================

# ==============================================================================
# OpenRouter API Configuration (REQUIRED)
# ==============================================================================
# OpenRouter credentials for Coordinator/Fixer LLM calls.
# Get your API key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-your-api-key-here         # UPDATE THIS VALUE

# Model for Coordinator agent in LOCAL mode (COORDINATOR_USE_DOCKER=false)
# Format: provider/model-name (no "openrouter/" prefix)
# See available models: https://openrouter.ai/models
# Recommended: minimax/minimax-m2.1 (fast, budget-friendly)
# Alternative: z-ai/glm-4.7
COORDINATOR_AND_FIXER__MODEL=minimax/minimax-m2.1     # can use default

# ==============================================================================
# Docker Mode LLM Configuration (ONLY when COORDINATOR_USE_DOCKER=true)
# ==============================================================================
# These variables are used by the agent-server running inside Docker containers.
# IMPORTANT: In Docker mode, model names MUST include the "openrouter/" prefix.

# API key for Docker mode (can match OPENROUTER_API_KEY above)
DOCKER_LLM_API_KEY=sk-or-v1-your-api-key-here        # UPDATE THIS VALUE  

# Model for Docker mode - NOTE THE "openrouter/" PREFIX (required for Docker)
# Format: openrouter/provider/model-name
DOCKER_LLM_MODEL=openrouter/minimax/minimax-m2.1     # can use default

# LLM API endpoint (OpenRouter)
DOCKER_LLM_BASE_URL=https://openrouter.ai/api/v1     # can use default; no changes needed

# Native tool calling support
# Set to false (true lead to duplicate JSON bug with native tool calling)
DOCKER_LLM_NATIVE_TOOL_CALLING=false                # can use default; no changes needed

# ==============================================================================
# Runtime Mode 
# ==============================================================================
# Toggle Docker workspace usage
# - true:  Use Docker sandbox (RECOMMENDED for security and isolation)
# - false: Use local workspace
COORDINATOR_USE_DOCKER=true

# ==============================================================================
# Docker Workspace Configuration
# ==============================================================================
# Host directory to mount into Docker at /workspace.
# ⚠️ IMPORTANT: Update this to your ACTUAL project directory (absolute path)
# Example: /home/username/projects/PyCVE
DOCKER_MOUNT_DIR=/path/to/your/PyCVE                # UPDATE THIS VALUE

# Workspace root inside the container (under the mount).
# **Purpose**: Runtime workspace for coordinator operations
# **Used for**: Creating per-run directories for cloned repos and artifacts
DOCKER_WORKSPACE_ROOT=/workspace/workspace                   # can use default; no changes needed

# Agent-server storage paths inside the container.
OH_CONVERSATIONS_PATH=/workspace/workspace/conversations     # can use default; no changes needed
OH_BASH_EVENTS_DIR=/workspace/workspace/bash_events          # can use default; no changes needed

# Base Docker image for workspace when no custom server image is set.
DOCKER_BASE_IMAGE=python:3.11-slim                           # can use default; no changes needed

# Custom agent-server image with DelegateTool preloaded.
# Build it first: docker build -t pycve-agent-server:mcp -f Dockerfile.agent-server .
DOCKER_SERVER_IMAGE=pycve-agent-server:mcp                   # can use default; no changes needed      

# Include DelegateTool in the Coordinator's tool list
DOCKER_ENABLE_DELEGATE=true                                  # can use default; no changes needed

# ==============================================================================
# OSV MCP Integration (OPTIONAL - for vulnerability enrichment)
# ==============================================================================
# ⚠️ IMPORTANT: This project ONLY supports HTTP mode for MCP.
# stdio mode is NOT supported and will not work.
#
# This local MCP server provides enriched vulnerability data from OSV (Open Source Vulnerabilities)
# including detailed advisories, affected ranges, and fix versions.
# ==============================================================================

# Enable MCP (Model Context Protocol) for OSV vulnerability enrichment
OSV_MCP_ENABLED=true                                      # can use default; no changes needed

# ------------------------------------------------------------------------------
# HTTP Mode 
#   OSV_MCP_HTTP_ENABLED=true - This is the ONLY supported mode
#   HTTP mode reference: https://modelcontextprotocol.io/specification/2025-06-18/basic/transports#streamable-http
# ------------------------------------------------------------------------------
# Enable HTTP transport for MCP server (required if OSV_MCP_ENABLED=true)
OSV_MCP_HTTP_ENABLED=true                                  # can use default; no changes needed

# MCP server HTTP endpoint URL
# - Local mode: Use localhost
# - Docker mode: Code automatically uses host.docker.internal

OSV_MCP_HTTP_URL=http://localhost:3000/mcp                 # can use default; no changes needed
# Port for MCP HTTP server (change if port 3000 is already in use)
OSV_MCP_HTTP_PORT=3000                                     # can use default; no changes needed
# Path for MCP endpoint (usually no need to change)
OSV_MCP_HTTP_PATH=/mcp                                     # can use default; no changes needed
# MCP transport protocol (do not change)
OSV_MCP_HTTP_TRANSPORT=streamable-http                     # can use default; no changes needed
# Host interface to bind (0.0.0.0 = all interfaces, recommended)
OSV_MCP_HTTP_HOST=0.0.0.0                                  # can use default; no changes needed